{"ast":null,"code":"// src/protected/AuthContext.js\nimport React,{createContext,useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";export const AuthContext=/*#__PURE__*/createContext();const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);useEffect(()=>{const checkAuth=async()=>{const token=localStorage.getItem('token');if(token){try{const response=await axios.get('http://localhost:5000/api/users/me',{headers:{Authorization:\"Bearer \".concat(token)}});setUser(response.data);}catch(error){console.error('Error verifying token:',error);localStorage.removeItem('token');}}};checkAuth();},[]);const login=(token,userData)=>{localStorage.setItem('token',token);setUser(userData);};const logout=()=>{localStorage.removeItem('token');setUser(null);};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,login,logout},children:children});};export default AuthProvider;","map":{"version":3,"names":["React","createContext","useState","useEffect","axios","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","checkAuth","token","localStorage","getItem","response","get","headers","Authorization","concat","data","error","console","removeItem","login","userData","setItem","logout","Provider","value"],"sources":["C:/Users/manue/OneDrive/Documentos/TAREITAS/web_store-main/tienda_online/src/protected/AuthContext.js"],"sourcesContent":["// src/protected/AuthContext.js\nimport React, { createContext, useState, useEffect } from 'react';\nimport axios from 'axios';\n\nexport const AuthContext = createContext();\n\nconst AuthProvider = ({ children }) => {\n    const [user, setUser] = useState(null);\n\n    useEffect(() => {\n        const checkAuth = async () => {\n            const token = localStorage.getItem('token');\n            if (token) {\n                try {\n                    const response = await axios.get('http://localhost:5000/api/users/me', {\n                        headers: { Authorization: `Bearer ${token}` }\n                    });\n                    setUser(response.data);\n                } catch (error) {\n                    console.error('Error verifying token:', error);\n                    localStorage.removeItem('token');\n                }\n            }\n        };\n\n        checkAuth();\n    }, []);\n\n    const login = (token, userData) => {\n        localStorage.setItem('token', token);\n        setUser(userData);\n    };\n\n    const logout = () => {\n        localStorage.removeItem('token');\n        setUser(null);\n    };\n\n    return (\n        <AuthContext.Provider value={{ user, login, logout }}>\n            {children}\n        </AuthContext.Provider>\n    );\n};\n\nexport default AuthProvider;\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CACjE,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1B,MAAO,MAAM,CAAAC,WAAW,cAAGN,aAAa,CAAC,CAAC,CAE1C,KAAM,CAAAO,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC9B,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CAEtCC,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAU,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC1B,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAE,CACP,GAAI,CACA,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAb,KAAK,CAACc,GAAG,CAAC,oCAAoC,CAAE,CACnEC,OAAO,CAAE,CAAEC,aAAa,WAAAC,MAAA,CAAYP,KAAK,CAAG,CAChD,CAAC,CAAC,CACFF,OAAO,CAACK,QAAQ,CAACK,IAAI,CAAC,CAC1B,CAAE,MAAOC,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAC9CR,YAAY,CAACU,UAAU,CAAC,OAAO,CAAC,CACpC,CACJ,CACJ,CAAC,CAEDZ,SAAS,CAAC,CAAC,CACf,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAa,KAAK,CAAGA,CAACZ,KAAK,CAAEa,QAAQ,GAAK,CAC/BZ,YAAY,CAACa,OAAO,CAAC,OAAO,CAAEd,KAAK,CAAC,CACpCF,OAAO,CAACe,QAAQ,CAAC,CACrB,CAAC,CAED,KAAM,CAAAE,MAAM,CAAGA,CAAA,GAAM,CACjBd,YAAY,CAACU,UAAU,CAAC,OAAO,CAAC,CAChCb,OAAO,CAAC,IAAI,CAAC,CACjB,CAAC,CAED,mBACIN,IAAA,CAACC,WAAW,CAACuB,QAAQ,EAACC,KAAK,CAAE,CAAEpB,IAAI,CAAEe,KAAK,CAAEG,MAAO,CAAE,CAAAnB,QAAA,CAChDA,QAAQ,CACS,CAAC,CAE/B,CAAC,CAED,cAAe,CAAAF,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}